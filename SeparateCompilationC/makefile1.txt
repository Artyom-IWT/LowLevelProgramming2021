# "Фиктивные" цели
.PHONY: all clean

#Вызываемые приложения
AR = ./riscv64-unknown-elf-ar
CC = ./riscv64-unknown-elf-gcc

# Файл библиотеки
LIBNAME = lib.a

# Параметры компиляции march=rv32i -mabi=ilp32 
CFLAGS = -march=rv32i -mabi=ilp32 -O1

# Построение объектного файла из исходного текста
# значением переменной $< будет имя первого файла в списке зависимостей, в данном случае - имя исходного файла
# $@ — имя .o-файла
# $< — имя .c-файла
# Создание .o из .c
.o: .c
	$(CC) $(CFLAGS) -c $< -o $@

# Чтобы достичь цели "all", требуется построить библиотеку
all: $(LIBNAME)

# $^ = (reverse.o)
$(LIBNAME): reverse.o
	$(AR) -rsc $@ $^
